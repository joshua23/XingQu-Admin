digraph XingQuAdminArchitecture {
    // 图形属性设置
    rankdir=TB;
    node [shape=box, style=filled, fontsize=10];
    edge [fontsize=8, color="#666666"];
    
    // 定义颜色主题
    bgcolor="#f8fafc";
    
    // 应用入口层
    subgraph cluster_entry {
        label="应用入口层 (Entry Layer)";
        style=filled;
        color="#e2e8f0";
        fillcolor="#f1f5f9";
        
        main [label="main.tsx\n应用入口", fillcolor="#3b82f6", fontcolor="white"];
        app [label="App.tsx\n路由配置", fillcolor="#3b82f6", fontcolor="white"];
    }
    
    // 上下文层
    subgraph cluster_contexts {
        label="上下文层 (Context Layer)";
        style=filled;
        color="#e2e8f0";
        fillcolor="#ecfdf5";
        
        auth_ctx [label="AuthContext\n用户认证", fillcolor="#10b981", fontcolor="white"];
        theme_ctx [label="ThemeContext\n主题切换", fillcolor="#10b981", fontcolor="white"];
        sidebar_ctx [label="SidebarContext\n侧边栏状态", fillcolor="#10b981", fontcolor="white"];
    }
    
    // 路由保护层
    subgraph cluster_protection {
        label="路由保护层 (Protection Layer)";
        style=filled;
        color="#e2e8f0";
        fillcolor="#fef3c7";
        
        protected_route [label="ProtectedRoute\n路由保护", fillcolor="#f59e0b", fontcolor="white"];
    }
    
    // 布局层
    subgraph cluster_layout {
        label="布局层 (Layout Layer)";
        style=filled;
        color="#e2e8f0";
        fillcolor="#ede9fe";
        
        sidebar [label="Sidebar\n侧边栏导航", fillcolor="#8b5cf6", fontcolor="white"];
        header [label="Header\n顶部导航", fillcolor="#8b5cf6", fontcolor="white"];
        theme_toggle [label="ThemeToggle\n主题切换按钮", fillcolor="#8b5cf6", fontcolor="white"];
    }
    
    // 页面层
    subgraph cluster_pages {
        label="页面层 (Pages Layer)";
        style=filled;
        color="#e2e8f0";
        fillcolor="#fce7f3";
        
        login [label="Login\n登录页面", fillcolor="#ec4899", fontcolor="white"];
        dashboard [label="Dashboard\n仪表盘", fillcolor="#ec4899", fontcolor="white"];
        user_mgmt [label="UserManagement\n用户管理", fillcolor="#ec4899", fontcolor="white"];
        content_mod [label="ContentModeration\n内容审核", fillcolor="#ec4899", fontcolor="white"];
        analytics [label="Analytics\n数据分析", fillcolor="#ec4899", fontcolor="white"];
        settings [label="Settings\n系统设置", fillcolor="#ec4899", fontcolor="white"];
    }
    
    // 组件层 - UI基础组件
    subgraph cluster_ui_components {
        label="UI基础组件 (UI Components)";
        style=filled;
        color="#e2e8f0";
        fillcolor="#dbeafe";
        
        card [label="Card\n卡片组件", fillcolor="#3b82f6", fontcolor="white"];
        button [label="Button\n按钮组件", fillcolor="#3b82f6", fontcolor="white"];
        badge [label="Badge\n标签组件", fillcolor="#3b82f6", fontcolor="white"];
        table [label="Table\n表格组件", fillcolor="#3b82f6", fontcolor="white"];
        tabs [label="Tabs\n选项卡组件", fillcolor="#3b82f6", fontcolor="white"];
        grid [label="Grid\n网格组件", fillcolor="#3b82f6", fontcolor="white"];
    }
    
    // 组件层 - 业务组件
    subgraph cluster_business_components {
        label="业务组件层 (Business Components)";
        style=filled;
        color="#e2e8f0";
        fillcolor="#f0f9ff";
        
        metric_card [label="MetricCard\n指标卡片", fillcolor="#0ea5e9", fontcolor="white"];
        analytics_chart [label="AnalyticsChart\n分析图表", fillcolor="#0ea5e9", fontcolor="white"];
        data_table [label="DataTable\n数据表格", fillcolor="#0ea5e9", fontcolor="white"];
    }
    
    // 用户管理模块
    subgraph cluster_user_module {
        label="用户管理模块 (User Module)";
        style=filled;
        color="#e2e8f0";
        fillcolor="#f0fdf4";
        
        user_detail_modal [label="UserDetailModal\n用户详情弹窗", fillcolor="#22c55e", fontcolor="white"];
        batch_ops_modal [label="BatchOperationsModal\n批量操作弹窗", fillcolor="#22c55e", fontcolor="white"];
    }
    
    // 文档管理模块 - 简化版
    subgraph cluster_document_module {
        label="文档管理模块 (Document Module)";
        style=filled;
        color="#e2e8f0";
        fillcolor="#fef7cd";
        
        doc_upload [label="DocumentUploadTab\n文档上传/协议展示", fillcolor="#eab308", fontcolor="white"];
    }
    
    // 管理员模块
    subgraph cluster_admin_module {
        label="管理员模块 (Admin Module)";
        style=filled;
        color="#e2e8f0";
        fillcolor="#fef2f2";
        
        admin_mgmt [label="AdminManagement\n管理员管理", fillcolor="#ef4444", fontcolor="white"];
    }
    
    // 服务层 - 简化版
    subgraph cluster_services {
        label="服务层 (Services Layer)";
        style=filled;
        color="#e2e8f0";
        fillcolor="#f3f4f6";
        
        supabase [label="supabase.ts\n数据库服务", fillcolor="#374151", fontcolor="white"];
        admin_service [label="adminService.ts\n管理员服务", fillcolor="#374151", fontcolor="white"];
        content_service [label="contentService.ts\n内容服务", fillcolor="#374151", fontcolor="white"];
    }
    
    // Hooks层 - 简化版
    subgraph cluster_hooks {
        label="Hooks层 (Custom Hooks)";
        style=filled;
        color="#e2e8f0";
        fillcolor="#f9fafb";
        
        auto_refresh [label="useAutoRefresh\n自动刷新Hook", fillcolor="#6b7280", fontcolor="white"];
    }
    
    // 类型定义层 - 简化版
    subgraph cluster_types {
        label="类型定义层 (Type Definitions)";
        style=filled;
        color="#e2e8f0";
        fillcolor="#fafafa";
        
        admin_types [label="admin.ts\n管理员类型", fillcolor="#525252", fontcolor="white"];
        content_types [label="content.ts\n内容类型", fillcolor="#525252", fontcolor="white"];
        index_types [label="index.ts\n通用类型", fillcolor="#525252", fontcolor="white"];
    }
    
    // 工具层
    subgraph cluster_utils {
        label="工具层 (Utils)";
        style=filled;
        color="#e2e8f0";
        fillcolor="#f8fafc";
        
        utils [label="utils.ts\n工具函数", fillcolor="#64748b", fontcolor="white"];
    }
    
    // 定义层级关系
    main -> app;
    
    app -> auth_ctx;
    app -> theme_ctx;
    app -> sidebar_ctx;
    app -> protected_route;
    app -> login;
    
    protected_route -> sidebar;
    protected_route -> header;
    
    app -> dashboard;
    app -> user_mgmt;
    app -> content_mod;
    app -> analytics;
    app -> settings;
    
    header -> theme_toggle;
    theme_toggle -> theme_ctx;
    
    sidebar -> sidebar_ctx;
    protected_route -> auth_ctx;
    
    // 页面到组件的依赖
    dashboard -> metric_card;
    dashboard -> analytics_chart;
    dashboard -> card;
    
    user_mgmt -> metric_card;
    user_mgmt -> data_table;
    user_mgmt -> tabs;
    user_mgmt -> user_detail_modal;
    user_mgmt -> batch_ops_modal;
    user_mgmt -> doc_upload;
    
    content_mod -> data_table;
    content_mod -> card;
    content_mod -> tabs;
    
    analytics -> analytics_chart;
    analytics -> metric_card;
    analytics -> card;
    
    settings -> admin_mgmt;
    settings -> tabs;
    settings -> card;
    
    // 组件间依赖
    metric_card -> utils;
    analytics_chart -> utils;
    data_table -> utils;
    
    card -> utils;
    button -> utils;
    badge -> utils;
    table -> utils;
    tabs -> utils;
    grid -> utils;
    
    // 服务层依赖
    dashboard -> supabase;
    user_mgmt -> supabase;
    content_mod -> content_service;
    analytics -> supabase;
    settings -> admin_service;
    
    admin_mgmt -> admin_service;
    user_detail_modal -> supabase;
    batch_ops_modal -> supabase;
    
    // Hooks依赖
    dashboard -> auto_refresh;
    user_mgmt -> auto_refresh;
    analytics -> auto_refresh;
    
    // 类型依赖
    auth_ctx -> index_types;
    admin_mgmt -> admin_types;
    admin_service -> admin_types;
    
    content_mod -> content_types;
    content_service -> content_types;
    
    // 服务之间的依赖
    admin_service -> supabase;
    content_service -> supabase;
    
    // 认证依赖
    login -> auth_ctx;
    protected_route -> auth_ctx;
    admin_mgmt -> auth_ctx;
}