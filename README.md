# æ˜Ÿè¶£App (XingQu) ğŸŒŸ

<div align="center">

![Star](https://img.shields.io/github/stars/joshua23/XingQu?style=social)
![Fork](https://img.shields.io/github/forks/joshua23/XingQu?style=social)
![Issues](https://img.shields.io/github/issues/joshua23/XingQu)
![License](https://img.shields.io/badge/license-MIT-blue.svg)

**åŸºäºFlutter + Supabaseçš„AIé©±åŠ¨å†…å®¹åˆ›ä½œå¹³å°**

*è®©æ¯ä¸ªäººéƒ½èƒ½è½»æ¾åˆ›é€ å’Œåˆ†äº«AIå†…å®¹*

[ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ 
[ğŸ“± åŠŸèƒ½å±•ç¤º](#-åŠŸèƒ½å±•ç¤º) â€¢ 
[ğŸ› ï¸ æŠ€æœ¯æ¶æ„](#ï¸-æŠ€æœ¯æ¶æ„) â€¢ 
[ğŸ“‹ éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—) â€¢ 
[ğŸ¤ å‚ä¸è´¡çŒ®](#-å‚ä¸è´¡çŒ®)

</div>

---

## ğŸ“± åŠŸèƒ½å±•ç¤º

### ğŸ¯ **æ ¸å¿ƒåŠŸèƒ½æ¨¡å—**

#### **ğŸ  ä¸»é¡µç³»ç»Ÿ - 4ä¸ªä¸“ä¸šTab**
- **ğŸ“Š ç²¾é€‰é¡µ**: AIè§’è‰²å±•ç¤ºã€è½®æ’­æ¨èã€ä¸ªæ€§åŒ–å†…å®¹
- **ğŸ­ ç»¼åˆé¡µ**: 6å¤§åŠŸèƒ½æ¨¡å—ã€å¿«é€Ÿå…¥å£ã€åŠ¨æ€å†…å®¹
- **ğŸµ FMç”µå°**: éŸ³é¢‘æ’­æ”¾å™¨ã€é¢‘é“ç®¡ç†ã€æ’­æ”¾å†å²ã€å®æ—¶ç»Ÿè®¡
- **ğŸ¤– AIåŠ©ç†**: å®‡å®™èƒŒæ™¯ã€AIäº¤äº’ã€é¢„è®¾é—®é¢˜ã€ç³»ç»ŸåŠŸèƒ½

#### **ğŸ” å‘ç°ä¸­å¿ƒ**
- **æ™ºèƒ½æœç´¢**: å…¨æ–‡æœç´¢ã€åˆ†ç±»ç­›é€‰ã€å®æ—¶å»ºè®®
- **ç²¾é€‰å†…å®¹**: çƒ­é—¨æ¨èã€åˆ†ç±»å¯¼èˆªã€ç”¨æˆ·è¯„åˆ†
- **åˆ›ä½œå±•ç¤º**: ç”¨æˆ·ä½œå“ã€æ¨¡æ¿èµ„æºã€å­¦ä¹ æ•™ç¨‹

#### **ğŸ¨ åˆ›ä½œä¸­å¿ƒ**
- **å¤šç§æ¨¡å¼**: AIè§’è‰²åˆ›ä½œã€éŸ³é¢‘åˆ¶ä½œã€æ•…äº‹ç¼–å†™ã€æ¸¸æˆè®¾è®¡
- **å¿«é€Ÿå·¥å…·**: æ¨¡æ¿åº“ã€ç´ æç®¡ç†ã€é¢„è§ˆåŠŸèƒ½
- **é¡¹ç›®ç®¡ç†**: è‰ç¨¿ä¿å­˜ã€ç‰ˆæœ¬æ§åˆ¶ã€åä½œåˆ†äº«

#### **ğŸ¤– AIè§’è‰²ç³»ç»Ÿ**
- **è§’è‰²åˆ›å»º**: ä¸ªæ€§åŒ–è®¾ç½®ã€æ€§æ ¼å®šä¹‰ã€èƒŒæ™¯æ•…äº‹
- **äº’åŠ¨åŠŸèƒ½**: å®æ—¶å¯¹è¯ã€æƒ…æ„Ÿåé¦ˆã€å­¦ä¹ æˆé•¿
- **ç¤¾äº¤ç‰¹æ€§**: å…³æ³¨æ”¶è—ã€è¯„åˆ†è¯„è®ºã€åˆ†äº«ä¼ æ’­

#### **ğŸµ éŸ³é¢‘å†…å®¹å¹³å°**
- **æ’­æ”¾ç³»ç»Ÿ**: é«˜éŸ³è´¨æ’­æ”¾ã€è¿›åº¦æ§åˆ¶ã€å¾ªç¯æ¨¡å¼
- **å†…å®¹ç®¡ç†**: åˆ†ç±»æµè§ˆã€æ”¶è—åˆ—è¡¨ã€æ’­æ”¾å†å²
- **ç¤¾åŒºåŠŸèƒ½**: ç”¨æˆ·ä¸Šä¼ ã€è¯„è®ºäº’åŠ¨ã€æ¨èç®—æ³•

---

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### **å‰ç«¯æŠ€æœ¯æ ˆ**
```yaml
Framework: Flutter 3.x
Language: Dart 3.0+
UI Design: Material Design 3
State Management: Provider
Navigation: Named Routes + PageView
Animations: Built-in + Lottie
Icons: FontAwesome + Cupertino
```

### **åç«¯æŠ€æœ¯æ ˆ**
```yaml
Backend Service: Supabase
Database: PostgreSQL with Extensions
Authentication: OTP + OAuth
File Storage: Supabase Storage
Real-time: WebSocket
Security: Row Level Security (RLS)
```

### **é¡¹ç›®æ¶æ„å›¾**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Flutter App                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  UI Layer (Pages + Widgets + Theme)        â”‚
â”‚  â”œâ”€â”€ MainPageRefactored (5 main pages)     â”‚
â”‚  â”œâ”€â”€ HomeRefactored (4 tabs)               â”‚
â”‚  â”œâ”€â”€ DiscoveryPage (search + content)      â”‚
â”‚  â”œâ”€â”€ CreationCenterRefactored              â”‚
â”‚  â””â”€â”€ TestDatabasePage (dev tools)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Business Logic Layer                      â”‚
â”‚  â”œâ”€â”€ ApiService (business APIs)            â”‚
â”‚  â”œâ”€â”€ SupabaseService (database ops)        â”‚
â”‚  â”œâ”€â”€ AuthService (authentication)          â”‚
â”‚  â””â”€â”€ ApiTester (testing utilities)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Data Layer                                â”‚
â”‚  â”œâ”€â”€ Models (AICharacter, AudioContent)    â”‚
â”‚  â”œâ”€â”€ Providers (state management)          â”‚
â”‚  â””â”€â”€ Local Storage (SharedPreferences)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              Supabase Backend              â”‚
â”‚  â”œâ”€â”€ PostgreSQL Database (80+ tables)      â”‚
â”‚  â”‚   â”œâ”€â”€ 71 ä¸šåŠ¡æ ¸å¿ƒè¡¨                     â”‚
â”‚  â”‚   â””â”€â”€ 9 APIé›†æˆæ‰©å±•è¡¨                   â”‚
â”‚  â”œâ”€â”€ Authentication (OTP + OAuth)          â”‚
â”‚  â”œâ”€â”€ Storage (files + media)               â”‚
â”‚  â”œâ”€â”€ Real-time (WebSocket)                 â”‚
â”‚  â”œâ”€â”€ Row Level Security (RLS)              â”‚
â”‚  â””â”€â”€ Edge Functions (custom logic)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ é¡¹ç›®ç»“æ„

```
xinqu_app/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart                    # åº”ç”¨å…¥å£ç‚¹
â”‚   â”œâ”€â”€ config/                      # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ supabase_config.dart     # Supabaseè¿æ¥é…ç½®
â”‚   â”œâ”€â”€ models/                      # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ ai_character.dart        # AIè§’è‰²æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ audio_content.dart       # éŸ³é¢‘å†…å®¹æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ creation_item.dart       # åˆ›ä½œé¡¹ç›®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ discovery_content.dart   # å‘ç°å†…å®¹æ¨¡å‹
â”‚   â”‚   â””â”€â”€ story.dart               # æ•…äº‹æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ pages/                       # é¡µé¢æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ main_page_refactored.dart      # ä¸»é¡µé¢å®¹å™¨
â”‚   â”‚   â”œâ”€â”€ home_refactored.dart           # é‡æ„åé¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ home_tabs/                     # é¦–é¡µTabé¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ home_selection_page.dart   # ç²¾é€‰é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ home_comprehensive_page.dart # ç»¼åˆé¡µ  
â”‚   â”‚   â”‚   â”œâ”€â”€ home_fm_page.dart          # FMç”µå°é¡µ
â”‚   â”‚   â”‚   â””â”€â”€ home_assistant_page.dart   # AIåŠ©ç†é¡µ
â”‚   â”‚   â”œâ”€â”€ discovery_page.dart            # å‘ç°é¡µé¢
â”‚   â”‚   â”œâ”€â”€ creation_center_refactored.dart # åˆ›ä½œä¸­å¿ƒ
â”‚   â”‚   â”œâ”€â”€ test_database_page.dart        # æ•°æ®åº“æµ‹è¯•é¡µ
â”‚   â”‚   â”œâ”€â”€ login_page.dart                # ç™»å½•é¡µé¢
â”‚   â”‚   â””â”€â”€ splash_page.dart               # å¯åŠ¨é¡µé¢
â”‚   â”œâ”€â”€ services/                    # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ supabase_service.dart    # Supabaseåº•å±‚æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ api_service.dart         # ä¸šåŠ¡APIæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ auth_service.dart        # è®¤è¯æœåŠ¡
â”‚   â”‚   â””â”€â”€ story_service.dart       # æ•…äº‹æœåŠ¡
â”‚   â”œâ”€â”€ utils/                       # å·¥å…·ç±»
â”‚   â”‚   â””â”€â”€ api_tester.dart          # APIæµ‹è¯•å·¥å…·
â”‚   â”œâ”€â”€ widgets/                     # UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ character_card.dart      # AIè§’è‰²å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ channel_card.dart        # éŸ³é¢‘é¢‘é“å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ bottom_navigation_refactored.dart # åº•éƒ¨å¯¼èˆª
â”‚   â”‚   â”œâ”€â”€ audio_player_widget.dart # éŸ³é¢‘æ’­æ”¾å™¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ starry_background.dart   # æ˜Ÿç©ºèƒŒæ™¯ç»„ä»¶
â”‚   â”œâ”€â”€ theme/                       # ä¸»é¢˜é…ç½®
â”‚   â”‚   â””â”€â”€ app_theme.dart           # åº”ç”¨ä¸»é¢˜å®šä¹‰
â”‚   â””â”€â”€ providers/                   # çŠ¶æ€ç®¡ç†
â”‚       â””â”€â”€ auth_provider.dart       # è®¤è¯çŠ¶æ€ç®¡ç†
â”œâ”€â”€ assets/                          # é™æ€èµ„æº
â”‚   â””â”€â”€ images/logo.png              # åº”ç”¨Logo
â”œâ”€â”€ android/                         # Androidé…ç½®
â”œâ”€â”€ ios/                            # iOSé…ç½®
â”œâ”€â”€ database_schema_enhanced.sql     # å¢å¼ºç‰ˆæ•°æ®åº“æ¶æ„
â”œâ”€â”€ supabase_functions.sql          # æ•°æ®åº“å‡½æ•°å’Œè§¦å‘å™¨
â”œâ”€â”€ test_connection.dart            # æ•°æ®åº“è¿æ¥æµ‹è¯•è„šæœ¬
â”œâ”€â”€ API_INTEGRATION_DATABASE_EXTENSION.sql    # APIé›†æˆæ•°æ®åº“æ‰©å±•è„šæœ¬
â”œâ”€â”€ EXISTING_TABLES_ENHANCEMENT.sql           # ç°æœ‰è¡¨åŠŸèƒ½å¢å¼ºè„šæœ¬
â”œâ”€â”€ API_INTEGRATION_RLS_POLICIES.sql          # RLSå®‰å…¨ç­–ç•¥è„šæœ¬
â”œâ”€â”€ pubspec.yaml                    # Flutteré¡¹ç›®é…ç½®
â””â”€â”€ README.md                       # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### **ç¯å¢ƒè¦æ±‚**
- **Flutter SDK**: 3.0+ 
- **Dart SDK**: 3.0+
- **å¼€å‘å·¥å…·**: Android Studio / VS Code
- **å¹³å°æ”¯æŒ**: iOS 11+, Android 5.0+
- **åç«¯æœåŠ¡**: Supabaseè´¦æˆ·

### **1. å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/joshua23/XingQu.git
cd XingQu
```

### **2. å®‰è£…ä¾èµ–**
```bash
flutter pub get
```

### **3. é…ç½®Supabase**

#### åˆ›å»ºSupabaseé¡¹ç›®
1. è®¿é—® [Supabase](https://app.supabase.com) å¹¶åˆ›å»ºæ–°é¡¹ç›®
2. è®°å½•é¡¹ç›®URLå’ŒåŒ¿åå¯†é’¥

#### æ›´æ–°é…ç½®æ–‡ä»¶
åœ¨ `lib/config/supabase_config.dart` ä¸­æ›´æ–°ï¼š
```dart
class SupabaseConfig {
  static const String supabaseUrl = 'YOUR_SUPABASE_URL';
  static const String supabaseAnonKey = 'YOUR_SUPABASE_ANON_KEY';
}
```

### **4. éƒ¨ç½²æ•°æ®åº“**

åœ¨Supabase SQLç¼–è¾‘å™¨ä¸­ä¾æ¬¡æ‰§è¡Œï¼š

#### åˆ›å»ºæ•°æ®åº“æ¶æ„
```sql
-- å¤åˆ¶å¹¶æ‰§è¡Œ database_schema_enhanced.sql å†…å®¹
-- åˆ›å»º15ä¸ªæ ¸å¿ƒè¡¨ï¼šusers, ai_characters, audio_contents ç­‰
```

#### æ·»åŠ æ•°æ®åº“å‡½æ•°
```sql
-- å¤åˆ¶å¹¶æ‰§è¡Œ supabase_functions.sql å†…å®¹  
-- æ·»åŠ è§¦å‘å™¨ã€è®¡æ•°å™¨ã€æœç´¢åŠŸèƒ½ç­‰
```

#### éƒ¨ç½²APIé›†æˆæ‰©å±• (2025å¹´1æœˆæ–°å¢)
```sql
-- é˜¶æ®µ1: åˆ›å»º9ä¸ªAPIé›†æˆæ ¸å¿ƒè¡¨
-- å¤åˆ¶å¹¶æ‰§è¡Œ API_INTEGRATION_DATABASE_EXTENSION.sql

-- é˜¶æ®µ2: å¢å¼º6ä¸ªç°æœ‰ä¸šåŠ¡è¡¨  
-- å¤åˆ¶å¹¶æ‰§è¡Œ EXISTING_TABLES_ENHANCEMENT.sql

-- é˜¶æ®µ3: éƒ¨ç½²RLSå®‰å…¨ç­–ç•¥ (åˆ†4ä¸ªæ­¥éª¤æ‰§è¡Œ)
-- å¤åˆ¶å¹¶æ‰§è¡Œ API_INTEGRATION_RLS_POLICIES.sql ä¸­çš„å„ä¸ªæ­¥éª¤
```

#### é…ç½®å­˜å‚¨æ¡¶
```sql
-- åˆ›å»ºæ–‡ä»¶å­˜å‚¨æ¡¶
INSERT INTO storage.buckets (id, name, public) VALUES 
('avatars', 'avatars', true),
('audios', 'audios', true),
('thumbnails', 'thumbnails', true);
```

### **5. è¿è¡Œåº”ç”¨**
```bash
# å¼€å‘æ¨¡å¼
flutter run

# æŒ‡å®šè®¾å¤‡
flutter run -d ios
flutter run -d android

# Webç‰ˆæœ¬
flutter run -d web
```

### **6. éªŒè¯éƒ¨ç½²**
å¯åŠ¨åº”ç”¨åï¼Œè®¿é—®æµ‹è¯•é¡µé¢éªŒè¯åŠŸèƒ½ï¼š
- åœ¨åº”ç”¨ä¸­å¯¼èˆªåˆ°"æ•°æ®åº“æµ‹è¯•"é¡µé¢
- æˆ–ç›´æ¥è®¿é—®è·¯ç”±ï¼š`/test_database`
- æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºç¡®è®¤è¿æ¥çŠ¶æ€

---

## ğŸš€ APIé›†æˆæ‰©å±•æ¶æ„ (2025å¹´1æœˆ)

### **å¤§æ¨¡å‹APIé›†æˆæ•°æ®åº“æ‰©å±•**

åŸºäºç«å±±å¼•æ“(Volcano Engine)çš„å¤§è¯­è¨€æ¨¡å‹APIï¼Œæˆ‘ä»¬å®Œæˆäº†å…¨é¢çš„æ•°æ®åº“æ¶æ„æ‰©å±•ï¼Œæ”¯æŒAIå¯¹è¯ã€éŸ³é¢‘æµåª’ä½“ã€å†…å®¹å®‰å…¨å’ŒAPIæˆæœ¬æ§åˆ¶ã€‚

#### **ğŸ—ï¸ æ¶æ„è®¾è®¡**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           APIé›†æˆæ•°æ®åº“æ‰©å±•æ¶æ„               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ¤– AIå¯¹è¯æœåŠ¡å±‚                              â”‚
â”‚  â”œâ”€â”€ ai_conversation_configs (å¯¹è¯é…ç½®)        â”‚
â”‚  â”œâ”€â”€ ai_conversation_sessions (ä¼šè¯ç®¡ç†)       â”‚
â”‚  â””â”€â”€ ai_conversation_messages (æ¶ˆæ¯å­˜å‚¨)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸµ éŸ³é¢‘æµåª’ä½“å±‚                              â”‚
â”‚  â”œâ”€â”€ audio_stream_configs (æµåª’ä½“é…ç½®)         â”‚
â”‚  â””â”€â”€ audio_play_sessions (æ’­æ”¾åˆ†æ)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ›¡ï¸ å†…å®¹å®‰å…¨å±‚                               â”‚
â”‚  â”œâ”€â”€ content_moderation_configs (å®¡æ ¸é…ç½®)     â”‚
â”‚  â””â”€â”€ content_moderation_logs (å®¡æ ¸è®°å½•)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š APIç®¡ç†å±‚                                â”‚
â”‚  â”œâ”€â”€ api_usage_statistics (ä½¿ç”¨ç»Ÿè®¡)          â”‚
â”‚  â””â”€â”€ api_quota_management (é…é¢ç®¡ç†)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”’ å®‰å…¨ç­–ç•¥å±‚                               â”‚
â”‚  â”œâ”€â”€ Row Level Security (24+ç­–ç•¥)             â”‚
â”‚  â”œâ”€â”€ ç”¨æˆ·æ•°æ®éš”ç¦»                             â”‚
â”‚  â”œâ”€â”€ ç®¡ç†å‘˜å®¡è®¡æƒé™                           â”‚
â”‚  â””â”€â”€ æ•æ„Ÿæ•°æ®è„±æ•                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### **ğŸ“Š éƒ¨ç½²ç»Ÿè®¡**
- **âœ… æ–°å¢è¡¨**: 9ä¸ªAPIé›†æˆæ ¸å¿ƒè¡¨
- **âœ… æ‰©å±•è¡¨**: 6ä¸ªç°æœ‰ä¸šåŠ¡è¡¨ï¼Œæ–°å¢22+å­—æ®µ
- **âœ… å®‰å…¨ç­–ç•¥**: 24ä¸ªRLSç­–ç•¥ï¼Œè¦†ç›–å…¨éƒ¨æ–°è¡¨
- **âœ… ä¸šåŠ¡å‡½æ•°**: 5ä¸ªå®‰å…¨å’Œä¸šåŠ¡å‡½æ•°
- **âœ… ç›‘æ§è§†å›¾**: 3ä¸ªç®¡ç†å‘˜ç›‘æ§è§†å›¾

#### **ğŸ”¥ æ ¸å¿ƒåŠŸèƒ½**

##### **1. AIå¯¹è¯æœåŠ¡ (ç«å±±å¼•æ“é›†æˆ)**
```sql
-- æ”¯æŒå¤šæ¨¡å‹é…ç½®
SELECT config_name, model_id, applicable_scenarios 
FROM ai_conversation_configs 
WHERE is_active = true;

-- ä¼šè¯ç®¡ç†å’Œæˆæœ¬æ§åˆ¶  
SELECT session_title, total_messages, total_cost, status
FROM ai_conversation_sessions 
WHERE user_id = auth.uid();
```

##### **2. éŸ³é¢‘æµåª’ä½“ç³»ç»Ÿ**
```sql
-- è‡ªé€‚åº”è´¨é‡é…ç½®
SELECT stream_url, quality_levels, adaptive_streaming
FROM audio_stream_configs 
WHERE audio_content_id = ?;

-- æ’­æ”¾è¡Œä¸ºåˆ†æ
SELECT play_progress_percentage, seek_events, buffer_events
FROM audio_play_sessions 
WHERE audio_content_id = ? AND completed = true;
```

##### **3. APIæˆæœ¬æ§åˆ¶**
```sql
-- ä½¿ç”¨é‡ç›‘æ§
SELECT api_type, request_count, cost_amount, success_rate
FROM api_usage_statistics 
WHERE user_id = auth.uid() AND usage_date = CURRENT_DATE;

-- é…é¢ç®¡ç†
SELECT quota_type, quota_limit, quota_used, quota_remaining
FROM api_quota_management 
WHERE user_id = auth.uid() AND is_active = true;
```

#### **ğŸ” å®‰å…¨æ¶æ„**

##### **ç”¨æˆ·æ•°æ®éš”ç¦»**
- æ¯ä¸ªç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„å¯¹è¯è®°å½•ã€APIä½¿ç”¨ç»Ÿè®¡
- åŸºäºä¼šè¯å…³è”çš„æ¶ˆæ¯è®¿é—®æ§åˆ¶
- é…é¢ç®¡ç†é˜²ç¯¡æ”¹ä¿æŠ¤

##### **ç®¡ç†å‘˜å®¡è®¡æƒé™**
- å®Œæ•´çš„ç³»ç»Ÿæ¦‚è§ˆè§†å›¾: `api_system_overview`
- å®‰å…¨ç›‘æ§å‡½æ•°: `get_api_system_overview()`
- æ•æ„Ÿå†…å®¹è„±æ•: `mask_sensitive_content()`

##### **å†…å®¹å®‰å…¨å®¡æ ¸**
- è‡ªåŠ¨åŒ–APIè°ƒç”¨å†…å®¹å®¡æ ¸
- äººå·¥å®¡æ ¸æµç¨‹æ”¯æŒ
- å¤šç»´åº¦é£é™©åˆ†ç±»å’Œç½®ä¿¡åº¦è¯„åˆ†

#### **âš¡ æ€§èƒ½ä¼˜åŒ–**
- **15ä¸ªä¸“ç”¨ç´¢å¼•**: è¦†ç›–æ‰€æœ‰æŸ¥è¯¢åœºæ™¯
- **JSONBå­—æ®µ**: çµæ´»é…ç½®å’Œé«˜æ•ˆæŸ¥è¯¢
- **åˆ†åŒºç­–ç•¥**: å¤§æ•°æ®é‡çš„ç»Ÿè®¡è¡¨æ”¯æŒ
- **è§¦å‘å™¨è‡ªåŠ¨åŒ–**: ç»Ÿè®¡æ•°æ®å®æ—¶æ›´æ–°

#### **ğŸ¯ ä¸šåŠ¡ä»·å€¼**
1. **æˆæœ¬é€æ˜**: ç²¾ç¡®åˆ°Tokençº§åˆ«çš„APIä½¿ç”¨æˆæœ¬ç»Ÿè®¡
2. **ç”¨æˆ·ä½“éªŒ**: è‡ªé€‚åº”éŸ³é¢‘è´¨é‡å’Œæµç•…æ’­æ”¾ä½“éªŒ  
3. **å†…å®¹å®‰å…¨**: å…¨è‡ªåŠ¨å†…å®¹å®¡æ ¸å’Œé£é™©é˜²æ§
4. **æ•°æ®é©±åŠ¨**: å®Œæ•´çš„ç”¨æˆ·è¡Œä¸ºåˆ†æå’Œæ¨èç®—æ³•æ”¯æŒ
5. **å¯æ‰©å±•æ€§**: æ”¯æŒæœªæ¥æ›´å¤šAIæœåŠ¡æä¾›å•†é›†æˆ

---

## ğŸ§ª æµ‹è¯•å’ŒéªŒè¯

### **æ•°æ®åº“è¿æ¥æµ‹è¯•**
ä½¿ç”¨å†…ç½®æµ‹è¯•å·¥å…·éªŒè¯åç«¯è¿æ¥ï¼š
```dart
import 'package:xinqu_app/utils/api_tester.dart';

// è¿è¡Œå®Œæ•´éªŒè¯
final results = await ApiTester.runFullValidation();

// æ£€æŸ¥ç‰¹å®šåŠŸèƒ½
final dbConnected = await ApiTester.testDatabaseConnection();
final apiWorking = await ApiTester.testAPIFunctions();
```

### **å‘½ä»¤è¡Œæµ‹è¯•**
```bash
# è¿è¡Œæ•°æ®åº“è¿æ¥æµ‹è¯•
dart test_connection.dart

# è¿è¡ŒFlutteræµ‹è¯•
flutter test

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
flutter test --coverage
```

### **æµ‹è¯•å†…å®¹åŒ…æ‹¬**
- âœ… æ•°æ®åº“è¿æ¥å’Œè¡¨ç»“æ„éªŒè¯
- âœ… APIæœåŠ¡åŠŸèƒ½æµ‹è¯•
- âœ… ç”¨æˆ·è®¤è¯æµç¨‹æµ‹è¯•
- âœ… æ•°æ®CRUDæ“ä½œæµ‹è¯•
- âœ… æ–‡ä»¶ä¸Šä¼ å’Œå­˜å‚¨æµ‹è¯•

---

## ğŸ“± éƒ¨ç½²æŒ‡å—

### **å¼€å‘ç¯å¢ƒ**
æ¨èé…ç½®ï¼š
```bash
# æ£€æŸ¥Flutterç¯å¢ƒ
flutter doctor

# é…ç½®IDE
flutter config --enable-web
flutter config --enable-macos-desktop
```

### **ç”Ÿäº§éƒ¨ç½²**

#### **ç§»åŠ¨ç«¯å‘å¸ƒ**
```bash
# Androidå‘å¸ƒ
flutter build apk --release
flutter build appbundle --release

# iOSå‘å¸ƒ  
flutter build ios --release
```

#### **Webç«¯éƒ¨ç½²**
```bash
# æ„å»ºWebç‰ˆæœ¬
flutter build web --release

# éƒ¨ç½²åˆ°Firebase Hosting
firebase deploy

# æˆ–éƒ¨ç½²åˆ°Vercel
vercel --prod
```

#### **åç«¯é…ç½®**
1. **è®¤è¯è®¾ç½®**ï¼šé…ç½®æ‰‹æœºå·è®¤è¯å’ŒOAuthæä¾›å•†
2. **åŸŸåé…ç½®**ï¼šè®¾ç½®å…è®¸çš„åŸŸåç™½åå•
3. **å­˜å‚¨é…ç½®**ï¼šåˆ›å»ºå’Œé…ç½®æ–‡ä»¶å­˜å‚¨æ¡¶
4. **å®‰å…¨ç­–ç•¥**ï¼šå¯ç”¨RLSå’Œè®¿é—®æ§åˆ¶

---

## ğŸ¨ è®¾è®¡ç³»ç»Ÿ

### **è§†è§‰ç‰¹è‰²**
- **ğŸŒ™ æ·±è‰²ä¸»é¢˜**ï¼šæ˜Ÿç©ºæ¸å˜èƒŒæ™¯ï¼Œç§‘æŠ€æ„Ÿåè¶³
- **ğŸŒŸ é‡‘è‰²ä¸»è°ƒ**ï¼š#FFD700ä¸»è‰²è°ƒï¼Œé«˜çº§è´¨æ„Ÿ
- **ğŸ­ iOSé£æ ¼**ï¼šç°ä»£åŒ–è®¾è®¡è¯­è¨€ï¼Œæµç•…äº¤äº’
- **âœ¨ åŠ¨ç”»æ•ˆæœ**ï¼šå¾®äº¤äº’åŠ¨ç”»ï¼Œæå‡ç”¨æˆ·ä½“éªŒ

### **ç»„ä»¶åº“**
- **CharacterCard**ï¼šAIè§’è‰²å±•ç¤ºå¡ç‰‡
- **ChannelCard**ï¼šéŸ³é¢‘é¢‘é“å¡ç‰‡ï¼Œå¸¦åŠ¨ç”»æ•ˆæœ
- **AudioPlayerWidget**ï¼šä¸“ä¸šéŸ³é¢‘æ’­æ”¾æ§ä»¶
- **StarryBackground**ï¼šåŠ¨æ€æ˜Ÿç©ºèƒŒæ™¯ç»„ä»¶

---

## ğŸ“Š åŠŸèƒ½è¯¦è§£

### **ğŸ¤– AIè§’è‰²ç³»ç»Ÿ**
```dart
// AIè§’è‰²æ•°æ®æ¨¡å‹
class AICharacter {
  final String id;
  final String name;
  final String personality;
  final String description;
  final List<String> tags;
  final bool isFollowing;
  final int followerCount;
  // ... æ›´å¤šå±æ€§
}

// ä½¿ç”¨ç¤ºä¾‹
final characters = await ApiService.instance.getAICharacters();
await ApiService.instance.toggleCharacterFollow(characterId);
```

### **ğŸµ éŸ³é¢‘å†…å®¹ç³»ç»Ÿ**
```dart
// éŸ³é¢‘å†…å®¹æ¨¡å‹
class AudioContent {
  final String id;
  final String title;
  final String artist;
  final Duration duration;
  final String category;
  final int playCount;
  // ... æ’­æ”¾å’Œç»Ÿè®¡ä¿¡æ¯
}

// æ’­æ”¾è®°å½•
await ApiService.instance.recordAudioPlay(
  audioId: audioId,
  playPosition: 30,
  completed: false,
);
```

### **ğŸ¨ åˆ›ä½œä¸­å¿ƒ**
```dart
// åˆ›ä½œé¡¹ç›®æ¨¡å‹
class CreationItem {
  final String id;
  final String title;
  final String contentType;
  final String status;
  final DateTime lastModified;
  // ... é¡¹ç›®ç®¡ç†ä¿¡æ¯
}

// åˆ›å»ºé¡¹ç›®
final projectId = await ApiService.instance.createCreationItem(
  title: "æˆ‘çš„AIè§’è‰²",
  contentType: "character",
  description: "ä¸€ä¸ªæœ‰è¶£çš„AIè§’è‰²",
);
```

---

## ğŸ”§ å¼€å‘æŒ‡å—

### **ä»£ç è§„èŒƒ**
- éµå¾ª [Dartå®˜æ–¹ä»£ç è§„èŒƒ](https://dart.dev/guides/language/effective-dart)
- ä½¿ç”¨ `dartfmt` è‡ªåŠ¨æ ¼å¼åŒ–ä»£ç 
- ç¼–å†™è¯¦ç»†çš„æ³¨é‡Šå’Œæ–‡æ¡£å­—ç¬¦ä¸²
- å‡½æ•°å’Œç±»å‘½åä½¿ç”¨é©¼å³°å‘½åæ³•

### **é¡¹ç›®ç»“æ„è§„èŒƒ**
- `pages/` - é¡µé¢çº§ç»„ä»¶ï¼Œè´Ÿè´£æ•´ä½“å¸ƒå±€
- `widgets/` - å¯å¤ç”¨UIç»„ä»¶
- `services/` - ä¸šåŠ¡é€»è¾‘å’ŒAPIè°ƒç”¨
- `models/` - æ•°æ®æ¨¡å‹å®šä¹‰
- `utils/` - å·¥å…·å‡½æ•°å’Œè¾…åŠ©ç±»

### **Gitå·¥ä½œæµ**
```bash
# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/your-feature-name

# æäº¤ä»£ç 
git add .
git commit -m "âœ¨ æ·»åŠ æ–°åŠŸèƒ½: æè¿°"

# æ¨é€å¹¶åˆ›å»ºPR
git push origin feature/your-feature-name
```

---

## ğŸ¤ å‚ä¸è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### **è´¡çŒ®æ–¹å¼**
1. **ğŸ› æŠ¥å‘ŠBug**ï¼šåœ¨ [Issues](https://github.com/joshua23/XingQu/issues) ä¸­æäº¤bugæŠ¥å‘Š
2. **ğŸ’¡ åŠŸèƒ½å»ºè®®**ï¼šæå‡ºæ–°åŠŸèƒ½æƒ³æ³•å’Œæ”¹è¿›å»ºè®®  
3. **ğŸ“– æ–‡æ¡£æ”¹è¿›**ï¼šå®Œå–„æ–‡æ¡£å’Œç¤ºä¾‹ä»£ç 
4. **ğŸ”§ ä»£ç è´¡çŒ®**ï¼šæäº¤åŠŸèƒ½ä»£ç å’Œbugä¿®å¤

### **è´¡çŒ®æ­¥éª¤**
1. Forkæœ¬é¡¹ç›®åˆ°æ‚¨çš„GitHubè´¦æˆ·
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»ºPull Request

### **è´¡çŒ®è§„èŒƒ**
- æäº¤ä¿¡æ¯ä½¿ç”¨çº¦å®šå¼æäº¤æ ¼å¼
- æ·»åŠ é€‚å½“çš„æµ‹è¯•è¦†ç›–
- æ›´æ–°ç›¸å…³æ–‡æ¡£
- ç¡®ä¿ä»£ç é€šè¿‡æ‰€æœ‰æ£€æŸ¥

---

## ğŸ“ˆ é¡¹ç›®çŠ¶æ€

### **å¼€å‘è¿›åº¦**
- âœ… **å‰ç«¯UIç³»ç»Ÿ**: 95% å®Œæˆ
- âœ… **åç«¯APIæ¶æ„**: 100% å®Œæˆ  
- âœ… **æ•°æ®åº“è®¾è®¡**: 100% å®Œæˆ
- âœ… **APIé›†æˆæ‰©å±•**: 100% å®Œæˆ â­ **æ–°å¢**
- âœ… **æµ‹è¯•å·¥å…·**: 100% å®Œæˆ
- âœ… **éƒ¨ç½²æ–‡æ¡£**: 100% å®Œæˆ

### **å·²å®ç°åŠŸèƒ½**
- âœ… å®Œæ•´çš„é¡µé¢å¯¼èˆªå’Œè·¯ç”±ç³»ç»Ÿ
- âœ… AIè§’è‰²åˆ›å»ºã€å±•ç¤ºå’Œäº¤äº’åŠŸèƒ½
- âœ… éŸ³é¢‘æ’­æ”¾å™¨å’Œå†…å®¹ç®¡ç†ç³»ç»Ÿ  
- âœ… åˆ›ä½œä¸­å¿ƒå’Œé¡¹ç›®ç®¡ç†åŠŸèƒ½
- âœ… å‘ç°é¡µé¢å’Œæ™ºèƒ½æ¨èç³»ç»Ÿ
- âœ… ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†
- âœ… æ•°æ®åº“è¿æ¥å’ŒAPIæµ‹è¯•å·¥å…·
- âœ… **å¤§æ¨¡å‹APIé›†æˆæ¶æ„ (ç«å±±å¼•æ“)** â­ **æ–°å¢**
- âœ… **AIå¯¹è¯æœåŠ¡å’Œæˆæœ¬æ§åˆ¶ç³»ç»Ÿ** â­ **æ–°å¢**
- âœ… **éŸ³é¢‘æµåª’ä½“å’Œæ’­æ”¾åˆ†æç³»ç»Ÿ** â­ **æ–°å¢**
- âœ… **å†…å®¹å®‰å…¨å®¡æ ¸å’Œé£é™©é˜²æ§** â­ **æ–°å¢**

### **æŠ€æœ¯äº®ç‚¹**
- ğŸ—ï¸ **ç°ä»£åŒ–æ¶æ„**ï¼šFlutter + Supabaseå…¨æ ˆè§£å†³æ–¹æ¡ˆ
- ğŸ¨ **ç²¾ç¾UIè®¾è®¡**ï¼šæ·±è‰²ä¸»é¢˜ + æ˜Ÿç©ºèƒŒæ™¯ + æµç•…åŠ¨ç”»
- ğŸ”’ **ä¼ä¸šçº§å®‰å…¨**ï¼šRLSè¡Œçº§å®‰å…¨ + OAuthè®¤è¯
- ğŸ¤– **AIæœåŠ¡é›†æˆ**ï¼šç«å±±å¼•æ“å¤§æ¨¡å‹ + å¤šæ¨¡æ€æ”¯æŒ â­ **æ–°å¢**
- ğŸ“Š **ç²¾ç¡®æˆæœ¬æ§åˆ¶**ï¼šTokençº§åˆ«è®¡è´¹ + é…é¢ç®¡ç† â­ **æ–°å¢**
- ğŸµ **è‡ªé€‚åº”æµåª’ä½“**ï¼šCDNåˆ†å‘ + æ’­æ”¾è¡Œä¸ºåˆ†æ â­ **æ–°å¢**
- ğŸ›¡ï¸ **æ™ºèƒ½å†…å®¹å®¡æ ¸**ï¼šè‡ªåŠ¨+äººå·¥å®¡æ ¸åŒé‡ä¿éšœ â­ **æ–°å¢**
- ğŸ§ª **å®Œå–„æµ‹è¯•**ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·å’ŒéªŒè¯ç³»ç»Ÿ
- ğŸ“š **è¯¦ç»†æ–‡æ¡£**ï¼šå®Œæ•´çš„å¼€å‘å’Œéƒ¨ç½²æŒ‡å—

---

## ğŸ“ è”ç³»æˆ‘ä»¬

- **ğŸ‘¨â€ğŸ’» é¡¹ç›®ç»´æŠ¤è€…**: [@joshua23](https://github.com/joshua23)
- **ğŸ› é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/joshua23/XingQu/issues)
- **ğŸ’¬ è®¨è®ºäº¤æµ**: [GitHub Discussions](https://github.com/joshua23/XingQu/discussions)
- **ğŸ“§ é‚®ä»¶è”ç³»**: é€šè¿‡GitHubè”ç³»

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æºã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

```
MIT License - æ‚¨å¯ä»¥è‡ªç”±åœ°ï¼š
âœ… ä½¿ç”¨ - å•†ä¸šæˆ–ä¸ªäººç”¨é€”
âœ… ä¿®æ”¹ - æ ¹æ®éœ€è¦è°ƒæ•´ä»£ç   
âœ… åˆ†å‘ - åˆ†äº«ç»™å…¶ä»–äºº
âœ… ç§ç”¨ - ç”¨äºç§äººé¡¹ç›®
âœ… å‡ºå”® - ç”¨äºå•†ä¸šäº§å“
```

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®å’ŒæœåŠ¡ï¼š

- **[Flutter](https://flutter.dev)** - å¼ºå¤§çš„è·¨å¹³å°UIæ¡†æ¶
- **[Supabase](https://supabase.com)** - ç°ä»£åŒ–çš„Firebaseæ›¿ä»£æ–¹æ¡ˆ
- **[Material Design](https://material.io)** - è°·æ­Œè®¾è®¡ç³»ç»Ÿ
- **[FontAwesome](https://fontawesome.com)** - ä¸°å¯Œçš„å›¾æ ‡åº“
- **[Dart](https://dart.dev)** - é«˜æ•ˆçš„ç¼–ç¨‹è¯­è¨€

---

<div align="center">

### â­ **å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªStarï¼** â­

**è®©æˆ‘ä»¬ä¸€èµ·æ„å»ºæ›´å¥½çš„AIå†…å®¹åˆ›ä½œå¹³å°ï¼**

[![Star History Chart](https://api.star-history.com/svg?repos=joshua23/XingQu&type=Date)](https://star-history.com/#joshua23/XingQu&Date)

---

**Made with â¤ï¸ by [joshua23](https://github.com/joshua23)**

*æœ€åæ›´æ–°ï¼š2025å¹´1æœˆ7æ—¥*
*ğŸ‰ APIé›†æˆæ‰©å±•æ¶æ„å®Œæˆï¼æ”¯æŒç«å±±å¼•æ“å¤§æ¨¡å‹ã€éŸ³é¢‘æµåª’ä½“ã€å†…å®¹å®‰å…¨å®¡æ ¸ç­‰ä¼ä¸šçº§åŠŸèƒ½*

</div> 