(function(v,k){typeof exports=="object"&&typeof module<"u"?k(exports,require("@supabase/supabase-js"),require("react"),require("lucide-react"),require("recharts"),require("date-fns")):typeof define=="function"&&define.amd?define(["exports","@supabase/supabase-js","react","lucide-react","recharts","date-fns"],k):(v=typeof globalThis<"u"?globalThis:v||self,k(v["@xingqu/shared"]={},v.Supabase,v.React,v.LucideReact,v.Recharts,v.dateFns))})(this,function(v,k,F,A,O,le){"use strict";var Or=Object.defineProperty;var Pr=(v,k,F)=>k in v?Or(v,k,{enumerable:!0,configurable:!0,writable:!0,value:F}):v[k]=F;var H=(v,k,F)=>Pr(v,typeof k!="symbol"?k+"":k,F);const Z={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},ue=(P,i)=>(Z==null?void 0:Z[P])||i,fe={url:ue("VITE_SUPABASE_URL","https://your-project.supabase.co"),anonKey:ue("VITE_SUPABASE_ANON_KEY","your-anon-key")},de=k.createClient(fe.url,fe.anonKey,{auth:{persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}}),I=class I{constructor(){H(this,"client");H(this,"channels",new Map);this.client=de}static getInstance(){return I.instance||(I.instance=new I),I.instance}subscribeToTable(i,l,s){var h;const u=`${i}_${(s==null?void 0:s.column)||"all"}`;this.channels.has(u)&&((h=this.channels.get(u))==null||h.unsubscribe());const g=this.client.channel(u).on("postgres_changes",{event:"*",schema:"public",table:i,...s&&{filter:`${s.column}=eq.${s.value}`}},l).subscribe();return this.channels.set(u,g),g}unsubscribe(i){var l;i&&this.channels.has(i)?((l=this.channels.get(i))==null||l.unsubscribe(),this.channels.delete(i)):(this.channels.forEach(s=>s.unsubscribe()),this.channels.clear())}async getComponentData(i,l={}){try{const{data:s,error:u}=await this.client.rpc("get_component_data",{component_type:i,filters:l});if(u)throw u;return s}catch(s){throw console.error(`Error fetching ${i} data:`,s),s}}async updateComponentConfig(i,l){try{const{data:s,error:u}=await this.client.from("component_configs").update({config_data:l,updated_at:new Date().toISOString()}).eq("id",i).select().single();if(u)throw u;return s}catch(s){throw console.error("Error updating component config:",s),s}}async logComponentUsage(i,l,s={}){try{const{error:u}=await this.client.from("component_usage_logs").insert({component_id:i,feishu_user_id:this.getCurrentFeishuUserId(),action_type:l,action_data:s,ip_address:await this.getClientIP(),user_agent:navigator.userAgent});if(u)throw u}catch(u){console.error("Error logging component usage:",u)}}getCurrentFeishuUserId(){return new URLSearchParams(window.location.search).get("feishu_user_id")||localStorage.getItem("feishu_user_id")}async getClientIP(){try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch{return null}}};H(I,"instance");let W=I;class me extends W{async getRealTimeMetrics(i=[]){try{let l=this.client.from("realtime_metrics").select("*").gte("expires_at",new Date().toISOString()).order("calculated_at",{ascending:!1});i.length>0&&(l=l.in("metric_name",i));const{data:s,error:u}=await l;if(u)throw u;const g=new Map;return s==null||s.forEach(h=>{g.set(h.metric_name,{value:h.metric_value,calculatedAt:h.calculated_at,expiresAt:h.expires_at})}),Object.fromEntries(g)}catch(l){throw console.error("Error fetching real-time metrics:",l),l}}subscribeToMetrics(i){return this.subscribeToTable("realtime_metrics",async()=>{const l=await this.getRealTimeMetrics();i(l)})}}const Ue=new W,We=new me;var Q={exports:{}},Y={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var he;function Ye(){if(he)return Y;he=1;var P=F,i=Symbol.for("react.element"),l=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,u=P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function h(j,p,R){var d,x={},C=null,S=null;R!==void 0&&(C=""+R),p.key!==void 0&&(C=""+p.key),p.ref!==void 0&&(S=p.ref);for(d in p)s.call(p,d)&&!g.hasOwnProperty(d)&&(x[d]=p[d]);if(j&&j.defaultProps)for(d in p=j.defaultProps,p)x[d]===void 0&&(x[d]=p[d]);return{$$typeof:i,type:j,key:C,ref:S,props:x,_owner:u.current}}return Y.Fragment=l,Y.jsx=h,Y.jsxs=h,Y}var V={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ve;function Ve(){return ve||(ve=1,process.env.NODE_ENV!=="production"&&function(){var P=F,i=Symbol.for("react.element"),l=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),j=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),E=Symbol.iterator,ee="@@iterator";function Ge(e){if(e===null||typeof e!="object")return null;var r=E&&e[E]||e[ee];return typeof r=="function"?r:null}var B=P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function _(e){{for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];Je("error",e,n)}}function Je(e,r,n){{var a=B.ReactDebugCurrentFrame,f=a.getStackAddendum();f!==""&&(r+="%s",n=n.concat([f]));var m=n.map(function(c){return String(c)});m.unshift("Warning: "+r),Function.prototype.apply.call(console[e],console,m)}}var Xe=!1,He=!1,Ze=!1,Qe=!1,er=!1,pe;pe=Symbol.for("react.module.reference");function rr(e){return!!(typeof e=="string"||typeof e=="function"||e===s||e===g||er||e===u||e===R||e===d||Qe||e===S||Xe||He||Ze||typeof e=="object"&&e!==null&&(e.$$typeof===C||e.$$typeof===x||e.$$typeof===h||e.$$typeof===j||e.$$typeof===p||e.$$typeof===pe||e.getModuleId!==void 0))}function tr(e,r,n){var a=e.displayName;if(a)return a;var f=r.displayName||r.name||"";return f!==""?n+"("+f+")":n}function xe(e){return e.displayName||"Context"}function D(e){if(e==null)return null;if(typeof e.tag=="number"&&_("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case s:return"Fragment";case l:return"Portal";case g:return"Profiler";case u:return"StrictMode";case R:return"Suspense";case d:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case j:var r=e;return xe(r)+".Consumer";case h:var n=e;return xe(n._context)+".Provider";case p:return tr(e,e.render,"ForwardRef");case x:var a=e.displayName||null;return a!==null?a:D(e.type)||"Memo";case C:{var f=e,m=f._payload,c=f._init;try{return D(c(m))}catch{return null}}}return null}var M=Object.assign,K=0,be,ye,ge,je,Ee,_e,we;function Re(){}Re.__reactDisabledLog=!0;function nr(){{if(K===0){be=console.log,ye=console.info,ge=console.warn,je=console.error,Ee=console.group,_e=console.groupCollapsed,we=console.groupEnd;var e={configurable:!0,enumerable:!0,value:Re,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}K++}}function ar(){{if(K--,K===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:M({},e,{value:be}),info:M({},e,{value:ye}),warn:M({},e,{value:ge}),error:M({},e,{value:je}),group:M({},e,{value:Ee}),groupCollapsed:M({},e,{value:_e}),groupEnd:M({},e,{value:we})})}K<0&&_("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var re=B.ReactCurrentDispatcher,te;function z(e,r,n){{if(te===void 0)try{throw Error()}catch(f){var a=f.stack.trim().match(/\n( *(at )?)/);te=a&&a[1]||""}return`
`+te+e}}var ne=!1,G;{var sr=typeof WeakMap=="function"?WeakMap:Map;G=new sr}function Ce(e,r){if(!e||ne)return"";{var n=G.get(e);if(n!==void 0)return n}var a;ne=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var m;m=re.current,re.current=null,nr();try{if(r){var c=function(){throw Error()};if(Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(T){a=T}Reflect.construct(e,[],c)}else{try{c.call()}catch(T){a=T}e.call(c.prototype)}}else{try{throw Error()}catch(T){a=T}e()}}catch(T){if(T&&a&&typeof T.stack=="string"){for(var o=T.stack.split(`
`),w=a.stack.split(`
`),b=o.length-1,y=w.length-1;b>=1&&y>=0&&o[b]!==w[y];)y--;for(;b>=1&&y>=0;b--,y--)if(o[b]!==w[y]){if(b!==1||y!==1)do if(b--,y--,y<0||o[b]!==w[y]){var N=`
`+o[b].replace(" at new "," at ");return e.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",e.displayName)),typeof e=="function"&&G.set(e,N),N}while(b>=1&&y>=0);break}}}finally{ne=!1,re.current=m,ar(),Error.prepareStackTrace=f}var U=e?e.displayName||e.name:"",L=U?z(U):"";return typeof e=="function"&&G.set(e,L),L}function ir(e,r,n){return Ce(e,!1)}function or(e){var r=e.prototype;return!!(r&&r.isReactComponent)}function J(e,r,n){if(e==null)return"";if(typeof e=="function")return Ce(e,or(e));if(typeof e=="string")return z(e);switch(e){case R:return z("Suspense");case d:return z("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case p:return ir(e.render);case x:return J(e.type,r,n);case C:{var a=e,f=a._payload,m=a._init;try{return J(m(f),r,n)}catch{}}}return""}var q=Object.prototype.hasOwnProperty,Se={},Te=B.ReactDebugCurrentFrame;function X(e){if(e){var r=e._owner,n=J(e.type,e._source,r?r.type:null);Te.setExtraStackFrame(n)}else Te.setExtraStackFrame(null)}function cr(e,r,n,a,f){{var m=Function.call.bind(q);for(var c in e)if(m(e,c)){var o=void 0;try{if(typeof e[c]!="function"){var w=Error((a||"React class")+": "+n+" type `"+c+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[c]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw w.name="Invariant Violation",w}o=e[c](r,c,a,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(b){o=b}o&&!(o instanceof Error)&&(X(f),_("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",a||"React class",n,c,typeof o),X(null)),o instanceof Error&&!(o.message in Se)&&(Se[o.message]=!0,X(f),_("Failed %s type: %s",n,o.message),X(null))}}}var lr=Array.isArray;function ae(e){return lr(e)}function ur(e){{var r=typeof Symbol=="function"&&Symbol.toStringTag,n=r&&e[Symbol.toStringTag]||e.constructor.name||"Object";return n}}function fr(e){try{return ke(e),!1}catch{return!0}}function ke(e){return""+e}function Oe(e){if(fr(e))return _("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",ur(e)),ke(e)}var Pe=B.ReactCurrentOwner,dr={key:!0,ref:!0,__self:!0,__source:!0},Ne,Fe;function mr(e){if(q.call(e,"ref")){var r=Object.getOwnPropertyDescriptor(e,"ref").get;if(r&&r.isReactWarning)return!1}return e.ref!==void 0}function hr(e){if(q.call(e,"key")){var r=Object.getOwnPropertyDescriptor(e,"key").get;if(r&&r.isReactWarning)return!1}return e.key!==void 0}function vr(e,r){typeof e.ref=="string"&&Pe.current}function pr(e,r){{var n=function(){Ne||(Ne=!0,_("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};n.isReactWarning=!0,Object.defineProperty(e,"key",{get:n,configurable:!0})}}function xr(e,r){{var n=function(){Fe||(Fe=!0,_("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};n.isReactWarning=!0,Object.defineProperty(e,"ref",{get:n,configurable:!0})}}var br=function(e,r,n,a,f,m,c){var o={$$typeof:i,type:e,key:r,ref:n,props:c,_owner:m};return o._store={},Object.defineProperty(o._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(o,"_self",{configurable:!1,enumerable:!1,writable:!1,value:a}),Object.defineProperty(o,"_source",{configurable:!1,enumerable:!1,writable:!1,value:f}),Object.freeze&&(Object.freeze(o.props),Object.freeze(o)),o};function yr(e,r,n,a,f){{var m,c={},o=null,w=null;n!==void 0&&(Oe(n),o=""+n),hr(r)&&(Oe(r.key),o=""+r.key),mr(r)&&(w=r.ref,vr(r,f));for(m in r)q.call(r,m)&&!dr.hasOwnProperty(m)&&(c[m]=r[m]);if(e&&e.defaultProps){var b=e.defaultProps;for(m in b)c[m]===void 0&&(c[m]=b[m])}if(o||w){var y=typeof e=="function"?e.displayName||e.name||"Unknown":e;o&&pr(c,y),w&&xr(c,y)}return br(e,o,w,f,a,Pe.current,c)}}var se=B.ReactCurrentOwner,De=B.ReactDebugCurrentFrame;function $(e){if(e){var r=e._owner,n=J(e.type,e._source,r?r.type:null);De.setExtraStackFrame(n)}else De.setExtraStackFrame(null)}var ie;ie=!1;function oe(e){return typeof e=="object"&&e!==null&&e.$$typeof===i}function Ae(){{if(se.current){var e=D(se.current.type);if(e)return`

Check the render method of \``+e+"`."}return""}}function gr(e){return""}var Ie={};function jr(e){{var r=Ae();if(!r){var n=typeof e=="string"?e:e.displayName||e.name;n&&(r=`

Check the top-level render call using <`+n+">.")}return r}}function Me(e,r){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var n=jr(r);if(Ie[n])return;Ie[n]=!0;var a="";e&&e._owner&&e._owner!==se.current&&(a=" It was passed a child from "+D(e._owner.type)+"."),$(e),_('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',n,a),$(null)}}function Le(e,r){{if(typeof e!="object")return;if(ae(e))for(var n=0;n<e.length;n++){var a=e[n];oe(a)&&Me(a,r)}else if(oe(e))e._store&&(e._store.validated=!0);else if(e){var f=Ge(e);if(typeof f=="function"&&f!==e.entries)for(var m=f.call(e),c;!(c=m.next()).done;)oe(c.value)&&Me(c.value,r)}}}function Er(e){{var r=e.type;if(r==null||typeof r=="string")return;var n;if(typeof r=="function")n=r.propTypes;else if(typeof r=="object"&&(r.$$typeof===p||r.$$typeof===x))n=r.propTypes;else return;if(n){var a=D(r);cr(n,e.props,"prop",a,e)}else if(r.PropTypes!==void 0&&!ie){ie=!0;var f=D(r);_("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",f||"Unknown")}typeof r.getDefaultProps=="function"&&!r.getDefaultProps.isReactClassApproved&&_("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function _r(e){{for(var r=Object.keys(e.props),n=0;n<r.length;n++){var a=r[n];if(a!=="children"&&a!=="key"){$(e),_("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",a),$(null);break}}e.ref!==null&&($(e),_("Invalid attribute `ref` supplied to `React.Fragment`."),$(null))}}var Be={};function $e(e,r,n,a,f,m){{var c=rr(e);if(!c){var o="";(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(o+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var w=gr();w?o+=w:o+=Ae();var b;e===null?b="null":ae(e)?b="array":e!==void 0&&e.$$typeof===i?(b="<"+(D(e.type)||"Unknown")+" />",o=" Did you accidentally export a JSX literal instead of a component?"):b=typeof e,_("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",b,o)}var y=yr(e,r,n,f,m);if(y==null)return y;if(c){var N=r.children;if(N!==void 0)if(a)if(ae(N)){for(var U=0;U<N.length;U++)Le(N[U],e);Object.freeze&&Object.freeze(N)}else _("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Le(N,e)}if(q.call(r,"key")){var L=D(e),T=Object.keys(r).filter(function(kr){return kr!=="key"}),ce=T.length>0?"{key: someKey, "+T.join(": ..., ")+": ...}":"{key: someKey}";if(!Be[L+ce]){var Tr=T.length>0?"{"+T.join(": ..., ")+": ...}":"{}";_(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,ce,L,Tr,L),Be[L+ce]=!0}}return e===s?_r(y):Er(y),y}}function wr(e,r,n){return $e(e,r,n,!0)}function Rr(e,r,n){return $e(e,r,n,!1)}var Cr=Rr,Sr=wr;V.Fragment=s,V.jsx=Cr,V.jsxs=Sr}()),V}process.env.NODE_ENV==="production"?Q.exports=Ye():Q.exports=Ve();var t=Q.exports;const Ke=({title:P,subtitle:i,children:l,loading:s=!1,error:u,className:g,onRefresh:h,onExport:j,onFullscreen:p,actions:R,height:d=300})=>{const[x,C]=F.useState(!1),S=async()=>{if(!(!h||x)){C(!0);try{await h()}finally{C(!1)}}},E=(...ee)=>ee.filter(Boolean).join(" ");return t.jsxs("div",{className:E("bg-bg-elevated border border-border-primary rounded-lg shadow-card","overflow-hidden",g),children:[t.jsx("div",{className:"px-6 py-4 border-b border-border-secondary",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"text-lg font-semibold text-text-primary truncate",children:P}),i&&t.jsx("p",{className:"text-sm text-text-tertiary mt-1",children:i})]}),t.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[R,h&&t.jsx("button",{onClick:S,disabled:x,className:E("p-2 text-text-tertiary hover:text-text-primary hover:bg-bg-hover rounded-md","transition-colors duration-200",x?"animate-spin":""),title:"刷新数据",children:t.jsx(A.RefreshCw,{className:"w-4 h-4"})}),j&&t.jsx("button",{onClick:j,className:"p-2 text-text-tertiary hover:text-text-primary hover:bg-bg-hover rounded-md transition-colors duration-200",title:"导出数据",children:t.jsx(A.Download,{className:"w-4 h-4"})}),p&&t.jsx("button",{onClick:p,className:"p-2 text-text-tertiary hover:text-text-primary hover:bg-bg-hover rounded-md transition-colors duration-200",title:"全屏查看",children:t.jsx(A.Maximize2,{className:"w-4 h-4"})}),t.jsx("button",{className:"p-2 text-text-tertiary hover:text-text-primary hover:bg-bg-hover rounded-md transition-colors duration-200",children:t.jsx(A.MoreHorizontal,{className:"w-4 h-4"})})]})]})}),t.jsxs("div",{className:"relative",style:{height:typeof d=="number"?`${d}px`:d},children:[s?t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-accent-primary border-t-transparent"}),t.jsx("p",{className:"text-sm text-text-tertiary",children:"加载中..."})]})}):u?t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-12 h-12 mx-auto mb-4 text-status-error",children:t.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",children:t.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),t.jsx("p",{className:"text-sm text-status-error font-medium mb-2",children:"数据加载失败"}),t.jsx("p",{className:"text-xs text-text-tertiary mb-4",children:u}),h&&t.jsx("button",{onClick:S,className:"text-sm text-accent-primary hover:text-accent-hover font-medium",children:"重新加载"})]})}):t.jsx("div",{className:"h-full w-full p-6",children:l}),x&&!s&&t.jsx("div",{className:"absolute inset-0 bg-bg-primary bg-opacity-50 flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-accent-primary border-t-transparent"})})]})]})},qe=({data:P,variant:i="area",showGrid:l=!0,animate:s=!0,height:u=300})=>{const g=d=>le.format(new Date(d),"MM/dd"),h=d=>d>=1e6?`${(d/1e6).toFixed(1)}M`:d>=1e3?`${(d/1e3).toFixed(1)}K`:d.toString(),j=({active:d,payload:x,label:C})=>{if(d&&x&&x.length){const S=x[0].payload;return t.jsxs("div",{className:"bg-bg-elevated border border-border-primary rounded-lg shadow-modal p-3",children:[t.jsx("p",{className:"text-sm font-medium text-text-primary mb-1",children:le.format(new Date(C),"yyyy年MM月dd日")}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:"#00B96B"}}),t.jsx("span",{className:"text-sm text-text-secondary",children:"用户数："}),t.jsx("span",{className:"text-sm font-semibold text-text-primary ml-1",children:x[0].value.toLocaleString()})]}),S.label&&t.jsx("p",{className:"text-xs text-text-tertiary mt-1",children:S.label})]})}return null},p="userGrowthGradient",R={data:P,margin:{top:20,right:30,left:20,bottom:5}};return t.jsx(O.ResponsiveContainer,{width:"100%",height:u,children:i==="area"?t.jsxs(O.AreaChart,{...R,children:[t.jsx("defs",{children:t.jsxs("linearGradient",{id:p,x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"5%",stopColor:"#00B96B",stopOpacity:.3}),t.jsx("stop",{offset:"95%",stopColor:"#00B96B",stopOpacity:0})]})}),l&&t.jsx(O.CartesianGrid,{strokeDasharray:"3 3",stroke:"#E5E6EB",strokeOpacity:.5}),t.jsx(O.XAxis,{dataKey:"timestamp",tickFormatter:g,axisLine:!1,tickLine:!1,tick:{fill:"#8F959E",fontSize:12,fontFamily:"Inter"},dy:10}),t.jsx(O.YAxis,{tickFormatter:h,axisLine:!1,tickLine:!1,tick:{fill:"#8F959E",fontSize:12,fontFamily:"Inter"},width:60}),t.jsx(O.Tooltip,{content:t.jsx(j,{})}),t.jsx(O.Area,{type:"monotone",dataKey:"value",stroke:"#00B96B",strokeWidth:3,fill:`url(#${p})`,dot:!1,activeDot:{r:6,fill:"#00B96B",strokeWidth:2,stroke:"#ffffff"},animationDuration:s?1e3:0,animationEasing:"ease-out"})]}):t.jsxs(O.LineChart,{...R,children:[l&&t.jsx(O.CartesianGrid,{strokeDasharray:"3 3",stroke:"#E5E6EB",strokeOpacity:.5}),t.jsx(O.XAxis,{dataKey:"timestamp",tickFormatter:g,axisLine:!1,tickLine:!1,tick:{fill:"#8F959E",fontSize:12,fontFamily:"Inter"}}),t.jsx(O.YAxis,{tickFormatter:h,axisLine:!1,tickLine:!1,tick:{fill:"#8F959E",fontSize:12,fontFamily:"Inter"},width:60}),t.jsx(O.Tooltip,{content:t.jsx(j,{})}),t.jsx(O.Line,{type:"monotone",dataKey:"value",stroke:"#00B96B",strokeWidth:3,dot:!1,activeDot:{r:6,fill:"#00B96B",strokeWidth:2,stroke:"#ffffff"},animationDuration:s?1e3:0,animationEasing:"ease-out"})]})})},ze=({title:P,value:i,change:l,trend:s="neutral",suffix:u="",prefix:g="",icon:h,loading:j=!1,className:p,onClick:R})=>{const d={up:"text-status-success",down:"text-status-error",neutral:"text-text-tertiary"},x={up:A.TrendingUp,down:A.TrendingDown,neutral:A.Minus}[s],C=E=>typeof E=="number"?E>=1e6?`${(E/1e6).toFixed(1)}M`:E>=1e3?`${(E/1e3).toFixed(1)}K`:E.toLocaleString():E.toString(),S=(...E)=>E.filter(Boolean).join(" ");return j?t.jsxs("div",{className:S("bg-bg-elevated border border-border-primary rounded-lg p-6 shadow-card","animate-pulse",p),children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("div",{className:"h-4 bg-bg-tertiary rounded w-24"}),h&&t.jsx("div",{className:"h-5 w-5 bg-bg-tertiary rounded"})]}),t.jsx("div",{className:"h-8 bg-bg-tertiary rounded w-16 mb-2"}),t.jsx("div",{className:"h-4 bg-bg-tertiary rounded w-20"})]}):t.jsxs("div",{className:S("bg-bg-elevated border border-border-primary rounded-lg p-6 shadow-card","transition-all duration-200","hover:shadow-hover hover:border-border-focus",R&&"cursor-pointer",p),onClick:R,children:[t.jsxs("div",{className:"flex items-center justify-between mb-2",children:[t.jsx("h3",{className:"text-sm font-medium text-text-secondary",children:P}),h&&t.jsx("div",{className:"flex-shrink-0 text-text-tertiary",children:h})]}),t.jsx("div",{className:"mb-2",children:t.jsxs("span",{className:"text-3xl font-bold text-text-primary",children:[g,C(i),u]})}),l&&t.jsxs("div",{className:S("flex items-center text-sm",d[s]),children:[t.jsx(x,{className:"w-4 h-4 mr-1"}),t.jsx("span",{className:"font-medium",children:l}),t.jsx("span",{className:"ml-1 text-text-tertiary",children:"vs 昨日"})]})]})};v.ChartContainer=Ke,v.MetricCard=ze,v.RealtimeMetricsService=me,v.SupabaseDataService=W,v.UserGrowthChart=qe,v.dataService=Ue,v.metricsService=We,v.supabase=de,Object.defineProperty(v,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=xingqu-shared.umd.js.map
