# æ˜Ÿè¶£Appåå°ç®¡ç†ç³»ç»Ÿ - Webç»„ä»¶

åŸºäºReact + TypeScript + Supabaseçš„ç»„ä»¶åŒ–åå°ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒåµŒå…¥é£ä¹¦å¤šç»´è¡¨æ ¼ã€‚

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®é‡‡ç”¨å¾®å‰ç«¯æ¶æ„ï¼Œå°†åå°ç®¡ç†åŠŸèƒ½æ‹†åˆ†ä¸ºç‹¬ç«‹çš„Reactç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶å¯ä»¥ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²ï¼Œå¹¶æ”¯æŒåµŒå…¥é£ä¹¦å¤šç»´è¡¨æ ¼ä¸­ä½¿ç”¨ã€‚

### ğŸ—ï¸ æŠ€æœ¯æ¶æ„

- **å‰ç«¯æ¡†æ¶**: React 18 + TypeScript
- **æ„å»ºå·¥å…·**: Vite + SWC
- **æ ·å¼æ–¹æ¡ˆ**: Tailwind CSS (Feishué€‚é…ä¸»é¢˜)
- **æ•°æ®å±‚**: Supabase (PostgreSQL + Real-time + Auth)
- **çŠ¶æ€ç®¡ç†**: SWR (æ•°æ®è·å–å’Œç¼“å­˜)
- **åŒ…ç®¡ç†**: npm workspaces (monorepo)

### ğŸ¯ è®¾è®¡åŸåˆ™

1. **ç»„ä»¶åŒ–**: æ¯ä¸ªåŠŸèƒ½æ¨¡å—ç‹¬ç«‹å°è£…
2. **åµŒå…¥å‹å¥½**: ä¼˜åŒ–é£ä¹¦å¤šç»´è¡¨æ ¼é›†æˆä½“éªŒ
3. **å“åº”å¼**: è‡ªé€‚åº”ä¸åŒå±å¹•å°ºå¯¸
4. **å®æ—¶æ€§**: åŸºäºSupabaseå®æ—¶è®¢é˜…
5. **è½»é‡çº§**: æœ€å°åŒ–åŒ…ä½“ç§¯å’Œä¾èµ–

## ğŸ“¦ åŠŸèƒ½æ¨¡å—

### ğŸ¯ ç»Ÿä¸€ç®¡ç†å…¥å£
- **è®¿é—®åœ°å€**: `http://localhost:3000`
- **è·¯ç”±ç»“æ„**:
  - `/dashboard` - å®æ—¶æ•°æ®çœ‹æ¿
  - `/users` - ç”¨æˆ·ç®¡ç†ä¸­å¿ƒ  
  - `/moderation` - å†…å®¹å®¡æ ¸ä¸­å¿ƒ

### 1. å®æ—¶æ•°æ®çœ‹æ¿ (Dashboard)
- **è·¯å¾„**: `/dashboard`
- **åŠŸèƒ½**: ç”¨æˆ·å¢é•¿ã€æ”¶å…¥åˆ†æã€å†…å®¹ç»Ÿè®¡ç­‰å®æ—¶æŒ‡æ ‡
- **ç‰¹è‰²**: å›¾è¡¨å¯è§†åŒ–ã€è‡ªåŠ¨åˆ·æ–°ã€è¶‹åŠ¿åˆ†æ

### 2. ç”¨æˆ·ç®¡ç†ä¸­å¿ƒ (User Management)
- **è·¯å¾„**: `/users`
- **åŠŸèƒ½**: ç”¨æˆ·CRUDã€ä¼šå‘˜ç­‰çº§ç®¡ç†ã€æ‰¹é‡æ“ä½œ
- **ç‰¹è‰²**: é«˜çº§ç­›é€‰ã€æ•°æ®å¯¼å‡ºã€æ“ä½œæ—¥å¿—

### 3. å†…å®¹å®¡æ ¸ä¸­å¿ƒ (Content Moderation)
- **è·¯å¾„**: `/moderation`
- **åŠŸèƒ½**: å†…å®¹å®¡æ ¸å·¥ä½œæµã€AIè¯„åˆ†ã€æ‰¹é‡å®¡æ ¸
- **ç‰¹è‰²**: ä¼˜å…ˆçº§ç®¡ç†ã€å¤šåª’ä½“é¢„è§ˆã€å®¡æ ¸å†å²

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16
- npm >= 7

### å®‰è£…ä¾èµ–
```bash
npm install
```

### ç¯å¢ƒé…ç½®
åˆ›å»º `.env` æ–‡ä»¶å¹¶é…ç½®Supabaseè¿æ¥:
```env
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### å¼€å‘æ¨¡å¼
```bash
# å¯åŠ¨ç»Ÿä¸€åå°ç®¡ç†ç³»ç»Ÿ
npm run dev

# è®¿é—®åœ°å€: http://localhost:3000
# - åŒ…å«ä¾§è¾¹æ å¯¼èˆª
# - æ”¯æŒè·¯ç”±åˆ‡æ¢
# - å®Œæ•´çš„ç®¡ç†åŠŸèƒ½

# å¯é€‰ï¼šå•ç‹¬å¯åŠ¨ç»„ä»¶ï¼ˆå¼€å‘è°ƒè¯•ç”¨ï¼‰
npm run dev:components     # å¯åŠ¨æ‰€æœ‰ç‹¬ç«‹ç»„ä»¶
npm run dev:dashboard      # ä»…å¯åŠ¨æ•°æ®çœ‹æ¿ (ç«¯å£3001)
npm run dev:user-mgmt      # ä»…å¯åŠ¨ç”¨æˆ·ç®¡ç† (ç«¯å£3002)
npm run dev:moderation     # ä»…å¯åŠ¨å†…å®¹å®¡æ ¸ (ç«¯å£3003)
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬
```bash
npm run build
```

## ğŸ”§ é¡¹ç›®ç»“æ„

```
web-components/
â”œâ”€â”€ components/                 # ç‹¬ç«‹ç»„ä»¶
â”‚   â”œâ”€â”€ dashboard/             # æ•°æ®çœ‹æ¿ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ DashboardComponent.tsx
â”‚   â”‚   â”‚   â””â”€â”€ main.tsx      # ç»„ä»¶å…¥å£
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”‚   â””â”€â”€ index.html
â”‚   â”œâ”€â”€ user-management/       # ç”¨æˆ·ç®¡ç†ç»„ä»¶
â”‚   â””â”€â”€ content-moderation/    # å†…å®¹å®¡æ ¸ç»„ä»¶
â”œâ”€â”€ shared/                    # å…±äº«åº“
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/        # é€šç”¨UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ services/          # SupabaseæœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ types/            # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ styles/           # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ tailwind.config.js    # Feishué€‚é…ä¸»é¢˜
â””â”€â”€ package.json              # æ ¹é…ç½®æ–‡ä»¶
```

## ğŸ¨ è®¾è®¡ç³»ç»Ÿ

### ä¸»é¢˜é…ç½®
é¡¹ç›®é‡‡ç”¨Lightä¸»é¢˜ï¼Œé€‚é…é£ä¹¦å¤šç»´è¡¨æ ¼é£æ ¼ï¼š

- **ä¸»è‰²è°ƒ**: Tech Green `#00b96b`
- **èƒŒæ™¯è‰²**: `#ffffff` / `#f7f8fa` 
- **æ–‡æœ¬è‰²**: `#1f2329` / `#646a73` / `#8b949f`
- **è¾¹æ¡†è‰²**: `#e3e6ea` / `#d0d7de`

### ç»„ä»¶è§„èŒƒ
- ç»Ÿä¸€çš„é—´è·ç³»ç»Ÿ (4pxåŸºå‡†)
- æ ‡å‡†åŒ–çš„åœ†è§’ (6px/8px/12px)
- ä¸€è‡´çš„é˜´å½±æ•ˆæœ
- å“åº”å¼æ–­ç‚¹è®¾è®¡

## ğŸ”Œ é£ä¹¦é›†æˆ

### åµŒå…¥æ–¹å¼
æ¯ä¸ªç»„ä»¶éƒ½æ”¯æŒé€šè¿‡iframeåµŒå…¥é£ä¹¦å¤šç»´è¡¨æ ¼ï¼š

```html
<iframe 
  src="https://your-domain.com/dashboard?feishu_user_id=123&feishu_table_id=456"
  width="100%" 
  height="600"
  frameborder="0">
</iframe>
```

### ä¸Šä¸‹æ–‡å‚æ•°
- `feishu_user_id`: é£ä¹¦ç”¨æˆ·ID
- `feishu_user_name`: ç”¨æˆ·æ˜µç§°
- `feishu_table_id`: è¡¨æ ¼ID
- `permissions`: æƒé™åˆ—è¡¨
- `locale`: è¯­è¨€è®¾ç½® (`zh-CN`/`en-US`)
- `theme`: ä¸»é¢˜è®¾ç½® (`light`/`dark`)

### æ¶ˆæ¯é€šä¿¡
ç»„ä»¶ä¸é£ä¹¦é€šè¿‡PostMessage APIé€šä¿¡ï¼š

```typescript
// å‘é€ç»™é£ä¹¦
window.parent.postMessage({
  type: 'component_ready',
  data: { height: 600, title: 'ç»„ä»¶æ ‡é¢˜' }
}, '*');

// æ¥æ”¶é£ä¹¦æ¶ˆæ¯
window.addEventListener('message', (event) => {
  const { type, data } = event.data;
  // å¤„ç†æ¶ˆæ¯
});
```

## ğŸ“Š æ•°æ®å±‚æ¶æ„

### Supabaseé›†æˆ
- **Database**: PostgreSQL with Row Level Security
- **Auth**: ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†
- **Realtime**: WebSocketå®æ—¶æ•°æ®è®¢é˜…
- **Edge Functions**: æœåŠ¡ç«¯é€»è¾‘å¤„ç†

### æ•°æ®æœåŠ¡
å…±äº«çš„æ•°æ®æœåŠ¡å±‚ (`@xingqu/shared/services/supabase`):

```typescript
import { dataService } from '@xingqu/shared/src/services/supabase';

// è·å–ç»„ä»¶æ•°æ®
const data = await dataService.getComponentData('dashboard', { 
  dateRange: '7d' 
});

// å®æ—¶è®¢é˜…
const subscription = dataService.subscribeToTable(
  'users', 
  (payload) => console.log(payload)
);
```

## ğŸ§ª æµ‹è¯•å’Œè´¨é‡

### æµ‹è¯•ç­–ç•¥
- **å•å…ƒæµ‹è¯•**: Vitest + Testing Library
- **é›†æˆæµ‹è¯•**: ç»„ä»¶é—´æ•°æ®æµæµ‹è¯•
- **E2Eæµ‹è¯•**: Playwright (é£ä¹¦åµŒå…¥åœºæ™¯)

### ä»£ç è´¨é‡
- **TypeScript**: ä¸¥æ ¼ç±»å‹æ£€æŸ¥
- **ESLint**: ä»£ç è§„èŒƒæ£€æŸ¥
- **Prettier**: ä»£ç æ ¼å¼åŒ–

### æ€§èƒ½ä¼˜åŒ–
- **ä»£ç åˆ†å‰²**: æŒ‰éœ€åŠ è½½
- **ç¼“å­˜ç­–ç•¥**: SWRæ™ºèƒ½ç¼“å­˜
- **åŒ…ä½“ç§¯**: Bundle analyzerç›‘æ§

## ğŸ“ˆ éƒ¨ç½²å’Œè¿ç»´

### éƒ¨ç½²æ–¹å¼
- **Vercel**: æ¨èçš„éƒ¨ç½²å¹³å°
- **Docker**: å®¹å™¨åŒ–éƒ¨ç½²
- **CDN**: é™æ€èµ„æºåˆ†å‘

### ç›‘æ§å’Œæ—¥å¿—
- **ç»„ä»¶ä½¿ç”¨**: Supabase Analytics
- **é”™è¯¯è¿½è¸ª**: é£ä¹¦æ¶ˆæ¯é€šçŸ¥
- **æ€§èƒ½ç›‘æ§**: Web Vitals

## ğŸ”’ å®‰å…¨è€ƒè™‘

- **CSPç­–ç•¥**: å†…å®¹å®‰å…¨ç­–ç•¥é…ç½®
- **CORS**: è·¨åŸŸè¯·æ±‚é™åˆ¶  
- **RLS**: æ•°æ®åº“è¡Œçº§å®‰å…¨
- **è¾“å…¥éªŒè¯**: Zod SchemaéªŒè¯

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºfeatureåˆ†æ”¯
3. éµå¾ªä»£ç è§„èŒƒ
4. ç¼–å†™æµ‹è¯•ç”¨ä¾‹
5. æäº¤Pull Request

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

**æ˜Ÿè¶£Appåå°ç®¡ç†ç³»ç»Ÿ** - è®©ç®¡ç†æ›´ç®€å•ï¼Œè®©æ•°æ®æ›´æ¸…æ™° âœ¨